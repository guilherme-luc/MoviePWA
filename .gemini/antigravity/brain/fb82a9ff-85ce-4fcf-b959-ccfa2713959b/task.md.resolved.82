# Task List - Movie Collection PWA

## User Feedback Fixes (Phase 7.1)
## User Feedback Fixes (Phase 7.1)
- [x] Fix "Zero State" Glitch on Navigation (Persistence/Guard issue) <!-- id: 58 -->
- [x] Optimize Auto-Enrichment Persistence (Avoid restart on refresh) <!-- id: 59 -->

## Project Setup
- [/] Initialize Vite + React + TypeScript project <!-- id: 0 -->
- [/] Install dependencies: `@tanstack/react-query`, `react-router-dom`, `gapi-script`, `clsx`, `tailwind-merge`, `lucide-react` <!-- id: 1 -->
- [x] Configure TailwindCSS (index.css, tailwind.config.js) <!-- id: 2 -->
- [x] Configure `vite-plugin-pwa` (manifest, icons, service worker strategy) <!-- id: 3 -->

## Infrastructure & Architecture
- [x] Create [GoogleSheetsService](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#4-655) Singleton Structure <!-- id: 4 -->
- [x] Implement [validateSheetStructure](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#572-597) (Check columns: BarCode, Title, Year, Genre) <!-- id: 5 -->
- [x] Implement Auth Logic (Login, Silent Refresh, Error Handling) <!-- id: 6 -->
- [x] Setup React Query Client & Provider <!-- id: 7 -->

## Core API Implementation
- [x] Implement [getGenres](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#625-632) (Fetch Sheets properties) <!-- id: 8 -->
- [x] Implement [getMoviesByGenre](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#232-282) (Fetch Rows) <!-- id: 9 -->
- [x] Implement [addMovie](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#370-384) (Append Row) <!-- id: 10 -->
- [x] Implement [updateMovie](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#458-474) (Update Row) <!-- id: 11 -->
- [x] Implement [deleteMovie](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#475-503) (Delete Row) <!-- id: 12 -->
- [x] Implement [moveMovie](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#504-520) Transaction (Atomic Copy + Delete) <!-- id: 13 -->
- [x] Implement [createGenre](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#521-535) (Add Sheet) <!-- id: 14 -->

## UI Components
- [x] Create [AppShell](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/layout/AppShell.tsx#14-84) with Layout & OfflineIndicator <!-- id: 15 -->
- [x] Create [StartupGuard](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/auth/StartupGuard.tsx#5-163) (Validates Sheet before showing app) <!-- id: 16 -->
- [x] Create `GenreList` Page (Home - with counts) <!-- id: 17 -->
- [x] Create `GenreManager` Modal (Add new genre) <!-- id: 18 -->
- [x] Create `MovieList` Page (Filterable, Searchable) <!-- id: 19 -->
- [x] Create [MovieEditor](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/modals/MovieEditorModal.tsx#63-1061) Page/Modal (Add/Edit Form) <!-- id: 20 -->

## Verification & Polish
- [x] Verify Offline Read-Only Mode (Block UI actions) <!-- id: 21 -->
- [x] Verify Sheet Validation (Test with invalid columns) <!-- id: 22 -->
- [x] Build & PWA Audit (Lighthouse/Browser Check) <!-- id: 23 -->

## User Requested Improvements (Phase 3) - "Pro" Features
- [x] Implement "What to Watch?" Randomizer Button (Dice Roll) <!-- id: 29 -->
- [x] Implement Dashboard Stats (Total movies, genre breakdown) <!-- id: 30 -->
- [x] Enhance TMDB Data (Synopsis, Rating, Duration) <!-- id: 31 -->
- [x] Implement Bulk Actions (Select multiple to move/delete) <!-- id: 32 -->
- [ ] Implement Advanced Filters (Sort by Year, Title, Added Date) <!-- id: 33 -->

## User Customization (Phase 4)
- [x] Add "User Rating" (Minha Nota) field & "Watched" toggle <!-- id: 34 -->
- [x] Make TMDB Fields Read-Only in Editor <!-- id: 35 -->

## User Feedback Fixes (Phase 4.1)
- [x] Fix Input Zoom (Force 16px) <!-- id: 36 -->
- [x] Fix Alphabetical Sorting (Ignore accents/spaces) <!-- id: 37 -->
- [x] Improve TMDB Selection (Manual Picker) <!-- id: 38 -->
- [x] Fix Image Save Error (Resize logic) <!-- id: 39 -->
- [x] Restore Delete Button <!-- id: 40 -->

## Refinements (Phase 4.2)
- [x] Fix Strict Sorting (Ignore spaces completely) <!-- id: 41 -->
- [x] Add "Remove Photo" Button <!-- id: 42 -->
- [x] Fix Footer Layout (Prevent button wrap) <!-- id: 43 -->

## Phase 13: Cleanup & Refinement
- [x] Remove Barcode Scanner Feature <!-- id: 11 -->
    - [x] Remove [BarcodeScanner.tsx](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/modals/BarcodeScanner.tsx) component <!-- id: 12 -->
    - [x] Remove scanner logic/UI from [MovieEditorModal.tsx](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/modals/MovieEditorModal.tsx) <!-- id: 13 -->

## User Experience Improvements (Phase 5)
- [x] Implement Skeleton Loading (Movies, Categories) <!-- id: 44 -->
- [x] Implement Dashboard Statistics <!-- id: 45 -->

## Advanced Media Integration (Phase 6)
- [x] Implement Youtube Trailer Integration (Fetch & Play) <!-- id: 46 -->
- [x] Implement "Watchlist" vs "Collection" Toggle <!-- id: 47 -->

## Phase 7: Content & Experience Expansion
- [x] Implement Backdrop Images (Thematic Backgrounds) <!-- id: 48 -->
- [ ] ~~Implement Auto-Enrichment System (Background Sync)~~ [DISABLED by User Request] <!-- id: 57 -->
- [x] Implement Advanced Filters (Sort by Duration/Rating/Date) <!-- id: 49 -->
- [x] Implement Custom Lists/Tags <!-- id: 50 -->
- [x] Implement Clickable Cast & Crew (Cross-search) <!-- id: 51 -->
- [x] Implement Streaming Availability (Where to Watch) <!-- id: 52 -->
- [x] Implement Franchise/Universe Grouping <!-- id: 53 -->
- [x] Implement User Badges & Achievements <!-- id: 54 -->
- [x] Implement Soundtrack Integration (Spotify) <!-- id: 55 -->
- [x] **Critics Ratings (OMDB)**
    - [x] Integrate OMDB API for Rotten Tomatoes / Metacritic <!-- id: 5 -->
    - [x] Display ratings in Movie Modal <!-- id: 6 -->
    - [ ] ~~Auto-fetch ratings for existing movies (Enrichment V3)~~ [DISABLED] <!-- id: 7 -->
- [x] **System Reliability**
    - [x] Fix 401 Auth Errors (Auto-Retry Mechanism) <!-- id: 8 -->
    - [x] Fix TypeScript Build Errors <!-- id: 9 -->
- [ ] **Final Polish**
    - [ ] Verify Backdrop logic for all movies
    - [ ] Full UI Review

## Phase 8: "God Mode" Polish & Features
- [x] **Visual**: Implement View Transitions (Smooth Navigation) <!-- id: 60 -->
- [x] **Visual**: Add Micro-interactions (Confetti/Pulse on Watched/Rated) <!-- id: 61 -->
- [x] **Customization**: Implement Theme Color Picker (Netflix Red, Prime Blue, etc.) <!-- id: 62 -->
- [x] **Social**: Create "Share Card" Generator (Instagram Stories format) <!-- id: 63 -->
- [x] **Privacy**: Implement "Showcase Mode" (Guest View - Hide Edit Buttons) <!-- id: 64 -->
- [x] **Data**: Implement JSON/CSV Export <!-- id: 65 -->

## Phase 9: Mobile Polish & Refinement
- [x] **Navigation**: Implement Bottom Navigation Bar (Mobile only) <!-- id: 66 -->
- [x] **Gestures**: Improve Touch Targets & Active States <!-- id: 67 -->
- [x] **UX**: Implement Pull-to-Refresh <!-- id: 68 -->
- [x] **Visual**: Improve "Safe Area" handling (iPhone notch/home bar) <!-- id: 69 -->

## Phase 10: Smart Suggestions (Collection Intelligence)
- [x] **Logic**: Implement "Smart Picker" Algorithm (Weighted Random based on Rating/Status) <!-- id: 70 -->
- [x] **UI**: Create "Suggestion Wizard" (Step-by-step preference selector) <!-- id: 71 -->
- [x] **UX**: Add "AI" Analysis Visuals (Simulated processing steps) <!-- id: 72 -->

## Phase 11: Real AI Integration (Gemini API)
- [x] **Config**: Add `VITE_GEMINI_API_KEY` to environment variables <!-- id: 73 -->
- [x] **Service**: Implement [GeminiService](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GeminiService.ts#24-111) with Google Generative AI SDK <!-- id: 74 -->
- [x] **UI**: Connect [SmartSuggestionModal](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/modals/SmartSuggestionModal.tsx#46-451) to Gemini Service <!-- id: 75 -->

## Phase 12: Granular Preferences (Gemini V2)
- [x] **UI**: Add Sub-Mood selection step to Wizard <!-- id: 76 -->
- [x] **Logic**: Update [GeminiService](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GeminiService.ts#24-111) to use sub-mood in prompt <!-- id: 77 -->
- [x] **Data**: Define sub-mood categories for each main mood <!-- id: 78 -->
