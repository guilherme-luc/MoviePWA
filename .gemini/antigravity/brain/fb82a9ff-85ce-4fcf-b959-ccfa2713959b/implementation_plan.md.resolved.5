## Implementação de Imagens (Capas)

### Estratégia de Armazenamento
1.  **Imagens do TMDB (Padrão):**
    *   Salvar apenas o **`poster_path`** (ex: `/uXDfjJbdP4ijW5hWSBrPrlKpxab.jpg`).
    *   **Frontend:** Gera a URL completa: `https://image.tmdb.org/t/p/{size}{poster_path}`.
2.  **Imagens Manuais (Fallback):**
    *   Salvar em **Base64** (WebP, Quality 0.6-0.7).
    *   **Limites:** Resize para ~300x450px.
    *   **Bloqueio:** Se exceder 45.000 caracteres, não salvar (evita erro da célula do Sheets).

### Componentes

#### 1. Configurações (`SettingsModal`)
*   [ ] Modal para salvar a **TMDB API Key** no `localStorage`.

#### 2. Backend ([GoogleSheetsService](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/services/GoogleSheetsService.ts#4-390))
*   [ ] **Schema:** Adicionar colunas `ImageType` e `ImageValue` na planilha.
*   [ ] **Validação:** Aceitar 6 colunas (`Barcode`, `Title`, `Year`, [Genres](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/hooks/useGenres.ts#9-19), `ImageType`, `ImageValue`).
*   [ ] **Migração:** Se a planilha tiver apenas 4 colunas, adicionar as 2 novas automaticamente.

#### 3. Frontend ([MovieEditorModal](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/components/modals/MovieEditorModal.tsx#15-209))
*   [ ] **Visualização:** Renderizar condicionalmente baseada no `imageType` (`tmdb` ou `base64`).
*   [ ] **Busca (TMDB):**
    *   Endpoint: `search/movie?query={title}&year={year}`.
    *   Listagem: Mostrar opções para o usuário escolher.
    *   Ao selecionar: `imageType='tmdb'`, `imageValue='/path.jpg'`.
*   [ ] **Upload Manual:**
    *   Compressor: Canvas -> Resize -> `toDataURL('image/webp', 0.7)`.
    *   Check de tamanho (< 45k chars).
    *   Ao salvar: `imageType='base64'`, `imageValue='data:image/...'`.

#### 4. Frontend (`Lists/MoviesPage`)
*   [ ] Exibir miniatura otimizada (`w92` ou `w154` para TMDB).

### Fluxo de Migração
1.  Atualizar Tipos ([Movie](file:///c:/Users/gabri/.gemini/antigravity/scratch/movie-pwa/src/types/index.ts#1-10) interface).
2.  Service: Atualizar Headers e Métodos CRUD.
3.  UI: Criar SettingsModal.
4.  UI: Atualizar MovieEditorModal com busca e upload.
5.  UI: Exibir nas listas.
